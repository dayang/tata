table!{
    /// 友链
    friendlink (id) {
        id -> Integer,
        /// 描述
        display_text -> Text,
        /// url
        link -> Text,
        /// 是否展示
        show -> Bool,
        /// 备注
        remark -> Text,
    }
}

table! {
    /// 标签
    tag (id) {
        id -> Integer,
        /// 名称
        name -> Text,
        /// 显示文字
        display_text -> Text,
    }
}

table! {
    /// 类别
    category (id) {
        id -> Integer,
        /// 名称
        name -> Text,
        /// 显示文字
        display_text -> Text,
    }
}

table! {
    /// 评论
    comment (id) {
        id -> Integer,
        /// 评论者名称
        username -> Text,
        /// 评论者邮箱
        email -> Text,
        /// 内容
        content -> Text,
        /// 评论时间
        comment_time -> Timestamp,
        /// 回复
        reply -> Text,
        /// 回复时间
        reply_time -> Text,
        /// 是否显示
        show -> Bool,
        /// 文章 id
        post_id -> Integer,
        /// 客户端标识
        user_agent -> Text,
    }
}

table! {
    /// 书籍
    book (id) {
        id -> Integer,
        /// 名称
        name -> Text,
        /// 显示名称
        diplay_text -> Text,
    }
}

table! {
    /// 文章
    post (id) {
        id -> Integer,
        /// 标题
        title -> Text,
        /// url
        url -> Text,
        /// 原始内容(markdown)
        raw_content -> Text,
        /// html内容
        html_content -> Text,
        /// 摘要
        summary -> Text,
        /// 缩略图url
        thumbnail -> Text,
        /// 阅读数
        reads -> Integer,
        /// 喜欢数
        likes -> Integer,
        /// 是否允许评论
        allow_comment -> Bool,
        /// 创建时间
        create_time -> Timestamp,
        /// 最后编辑时间
        edit_time -> Timestamp,
        /// 是否发布
        published -> Bool,
        /// 分类
        category_id -> Nullable<Integer>,

        /// 文章类型，1-博客，2-book
        post_type -> Integer,
        /// 父节点id，-1 表示顶层节点
        parent_id -> Nullable<Integer>,
        /// book id
        book_id -> Nullable<Integer>,
        /// 节点显示顺序
        display_order -> Nullable<Integer>,
    }
}

table! {
    /// 标签文章关系
    posttag (id) {
        id -> Integer,
        post_id -> Integer,
        tag_id -> Integer,
    }
}

table! {
    /// 字典项，保存一些通用设置
    dict (id) {
        d_key -> Text,
        d_value -> Text,
    }
}

table! {
    /// 用户
    user (id) {
        id -> Integer,
        /// 名称
        name -> Text,
        /// 昵称
        nick_name -> Text,
        /// 描述
        description -> Text,
        /// 密码
        password -> Text,
        /// 头像url
        avator -> Text,
        /// 邮箱
        email -> Text,
        /// 新评论是否通知
        notify_comment -> Bool,
        /// 通知方式 1-系统，2-邮箱
        notify_type -> Integer,
        /// 通知邮箱
        notify_email -> Text,
        /// 登录session有效时长
        session_period -> Integer,
    }
}

table! {
    /// 登录日志
    login_info (id) {
        id -> Integer,
        /// 用户id
        user_id -> Nullable<Integer>,
        /// 登录用户名
        username -> Text,
        /// 登录时间
        login_time -> Timestamp,
        /// 是否登录成功
        is_success -> Bool,
        /// ip
        ip -> Text,
        /// mac
        mac -> Text,
        /// 客户端标识
        user_agent -> Text,
    }
}
